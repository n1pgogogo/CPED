# 测试GPT标注准确率

先在微博以`大五人格`为关键词，检索到24位在微博上面分享自己的测评结果，不过用户进行大五人格测验是在不同平台进行的，所得到最后的分数也会不一致。所以我们最后只选取了测验最高分和用户得分为已知的情况下微博用户的大五人格特征。

筛选后得到12位有效的微博用户，再将得分除以总分，若大于0.5则该特质标注为高，否则该特质标注为低。

## GPT prompt

我们使用GPT4 API接口的形式进行批量标注。不过由于GPT4的token数量有限，所以当用户发博达到超出token数量，我们会进行切分，并对于该用户进行多次提问，以此得到多个结果。

GPT4所提交的完整对话如下：
```python
[{
    "role": "user",
    "content": """我会提供一段文本，该文本由一位人物在不同场景与不同谈话中所进行的对话组成，但仅包含该人物的说辞，对话内容由\\n分隔。
你需要依据神经质、外向性、开放性、宜人性、尽责性这五个维度分析该人物的人格特点，分析的时候你需要严格遵守下面的格式规范进行回答，且分析内容必须引用所给内容：
- [维度]: [对于该维度的分析内容]

> 其中开放性指个体对经验持开放、探求的态度。尽责性指个体在目标导向行为上的组织、坚持和动机。外向性指个体对外部世界的积极投入程度。宜人性指个体在合作与社会和谐性方面的差异。神经质指个体体验消极情绪的倾向。而且在分析完毕后，你还要给出分析的最终结果，结果只有高和低两个值，如果不知道就是不知道，以json格式保存，具体格式如下:{"神经质": "[高或低]","外向性": "[高或低]","开放性": "[高或低]","宜人性": "[高或低]","尽责性": "[高或低]"}
下面是我提供的文本: """ + message
}]
```

> message 是所提供的用户发博具体内容

最后我们得到的返回结果如下(下方是一个完整的回复)：
```markdown
- 神经质: 从文本中可以看出此人时常表现出焦虑、紧张和抱怨等特质，比如“受不了了，，，，，真的要死了”、“想死了，，，，，”，因此神经质较高。
- 外向性: 从文本中表述的日常生活、常常抱怨等内容来看，可能不太适应社交场合，所以外向性较低。
- 开放性: 文本中该人有时表现出对新事物的兴趣，如准备攒钱买一个拍立得，看了一圈iwatch表带等，可见开放性较高。
- 宜人性: 文本中此人经常表现出对他人的抱怨或埋怨，如“看到萌萌接了某小玩具广告（大人糖）想起这个品牌和小s解约背刺以表忠心，观感很复杂……所以对她们家东西有点恶感”，因此宜人性较低。
- 尽责性: 文本中此人在面对压力时也能坚持下去，如“因为石油分手崩溃大哭，被迫听了两小时的哭吼埋冤导致现在还没有睡觉但是明天满课的一薛牲一枚呀～我永远恨集体生活”，所以尽责性较高。

最终分析结果: {""神经质"": ""高"",""外向性"": ""低"",""开放性"": ""高"",""宜人性"": ""低"",""尽责性"": ""高""}"
```

> 注：尽管要求GPT回答的结果只能是 高或低，不过它有时候依旧会给出其余结果。

## 评估模型

预测大五人格，常采用的方式是在某一维度下，预测的准确率，所以我们采用准确率的方式来评估模型。

### 预处理

受到GPT的token数量限制，所以对于单个用户来说，存在多个人格预测结果，为了避免多段内容所涉及的内容、风格存在差异造成的误差，我们需要进行转换得到单个用户一个人格预测结果。

因此采用了以下步骤进转换：
1. 将预测数据和真实数据中高、低数值转换为$1, 0$，其余值全部转换为0.5，这只是为了方便计算。
2. 在预测数据中，依据用户进行分组求平均值。同时也对真实数据进行分组求平均值，便于后续处理。
3. 对于预测数据的平均值进行判断，若值大于`0.5`，就替换成`1`，表示当前维度下为高。若值小于`0.5`，则替换成`0`。若大于`0.5`，则保持不变，表示预测不了该维度的特征。最终得到一个用户一份人格预测结果。


### 计算准确率
各个维度下进行比较，判断二者之间相等的概率，即准确率。

所得结果如下：
```
Neuroticism          0.6
Extraversion         0.5
Openness             1.0
Agreeableness        0.8
Conscientiousness    0.6
```